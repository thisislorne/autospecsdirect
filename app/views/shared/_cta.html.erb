<% if @product.mac && @product.windows %>
  <% if @os == 'mac' %>
    <% alternative = 'Windows' %>
    <% download_link = @download_link_mac %>
    <% alternative_link = @download_link_windows %>
  <% else %>
    <% alternative = 'Mac' %>
    <% download_link = @download_link_windows %>
    <% alternative_link = @download_link_mac %>
  <% end %>
  <span class="download-link" onclick="convert('<%= download_link %>', '<%= @download_type %>');">
    DOWNLOAD FOR <%= @os.upcase %>
  </span>
  <% if action_name == 'lp' %>
    <div class="compatibility">
      <span>Compatible with:</span>
      <span class="os-symbol" onclick="convert('<%= download_link %>', '<%= @download_type %>')">
        <i class="fa fa-apple"></i>
      </span>
      <span class="os-symbol" onclick="convert('<%= alternative_link %>', '<%= @download_type %>')">
        <i class="fa fa-windows"></i>
      </span>
    </div>
  <% else %>
    <p class="AlsoAvailable">Also available on <span class="AlsoAvailable__link" onclick="convert('<%= alternative_link %>', '<%= @download_type %>')"><%= alternative %></span></p>
  <% end %>
<% elsif @product.mac %>
  <span class="download-link" onclick="convert('<%= @download_link_mac %>', '<%= @download_type %>')">
    DOWNLOAD FOR MAC
  </span>
<% else %>
  <span class="download-link" onclick="convert('<%= @download_link_windows %>', '<%= @download_type %>')">
    DOWNLOAD FOR WINDOWS
  </span>
<% end %>
<script>
  var fired = false;

  function convert(url, downloadType) {
    gtag_report_conversion(downloadType);
    window.location = url;
    if(!fired){
      fired = true;
      $.ajax({
        url: '/gs_event',
        data: {
          product: "<%= @product.title %>"
        }
      });
    }
  }

  // Event snippet for Download Offer and Software
  function gtag_report_conversion(downloadType) {
    var sendTo = downloadType == 'offer' ? 'AW-777281614/0hDhCMzw6pABEM7A0fIC' : 'AW-777281614/UXccCPz26pABEM7A0fIC';
    gtag('event', 'conversion', {
        'send_to': sendTo
    });
  }
</script>
